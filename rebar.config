%% -*- erlang -*-

 {require_otp_vsn, "R16"}.
 {require_min_otp_vsn, "R16B"}.

 {erl_opts, [
             bin_opt_info,
            %compressed
             debug_info,
             warnings_as_errors
            ]}.

 {port_specs, [
               {"x86_64-.*-darwin",
                "priv/lib/baseline_drv.so", [
                                             "c_src/baseline_drv.c"
                                            ]}
              ]}.

 {port_env, [
             {"R16B0[2-3].*", "DRV_CFLAGS", "$DRV_CFLAGS -DUSE_DRIVER_ASYNC_PORT_KEY=1"}
            ]}.

 {ct_log_dir, ".ct"}.
 {ct_extra_params, "-ct_config files/ct/ct.config -cover files/ct/cover.config"}.

 {clean_files, [
                "ebin", "erl_crash.dump",
                "priv",
                ".ct", "test/*.beam"
              ]}.

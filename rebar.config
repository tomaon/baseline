%% -*- erlang -*-

%% @see
%%   ct_opts : http://www.erlang.org/doc/man/ct.html
%%   dialyzer: http://www.erlang.org/doc/man/dialyzer.html
%%   erl_opts: http://www.erlang.org/doc/man/compile.html

{base_dir, ".rebar3"}.

{deps, [
       ]}.

{profiles, [
            {prod, [
                    {erl_opts, [
                                %% compressed
                                warnings_as_errors
                               ]}
                   ]},
            {test, [
                    {deps, [
                           ]},
                    {erl_opts, [
                                bin_opt_info,
                                %% debug_info % default
                                %% {d,'TEST'} % default
                                %% warnings_as_errors,
                                warn_export_all,
                                warn_export_vars,
                                warn_obsolete_guard,
                                warn_unused_import
                               ]},
                    {ct_opts, [
                               {config, "priv/ct/ct.config"},
                               {cover, "priv/ct/cover.config"}
                              ]},
                    {dialyzer, [
                                {warnings, [
                                            no_improper_lists,
                                            unmatched_returns,
                                            error_handling,
                                            race_conditions,
                                          % overspecs,
                                            underspecs,
                                          % specdiffs,
                                            unknown
                                           ]},
                                {get_warnings, true},
                                {plt_extra_apps, []},
                                {base_plt_apps, [crypto,erts,kernel,stdlib]}
                               ]}

                   ]}
           ]}.
